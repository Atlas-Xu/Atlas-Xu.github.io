---
title: 高情商：参与度很高的NAS
tags:
  - 电子垃圾
abbrlink: 1910c889
date: 2024-03-01 00:26:00
---
喊了2年的NAS终于搭完了，也是灵车中的灵车（贫穷如我）
<!-- more -->
先放一张成品照片
![](https://data.xchub.cn/nas成品.jpg)

# 硬件选择
- **主板**：选择了MSI s4smd，主板自带一个10G光口，且刷BIOS可以上8、9代iu，只要160，找不到性价比更高的主板了，除了对内存挑剔，必须够低频。
- **CPU**：CPU方面本着够用就行的原则，选择了i3-8100T，低功耗且核显不错。
- **硬盘**：硬盘有朋友赞助了4块DELL的服务器拆机盘，主打一个灵车漂移。
- **内存**：DDR4 2400 ×2，jd自营的杂牌酷兽性价比非常高。
- **机箱**：机箱的预算在500上下，且需要6盘，最终选择了一种很新的手工——见方，带6个3.5硬盘位，且可以扩展10个2.5硬盘位，搭配主板的PCIE，满足所有硬盘需求了。
  - 缺陷1：电源的安装比较抽象，虽然说是支持ATX电源，实际上用SFX电源才可以不和硬件冲突；
  - 缺陷2：背板使用的是SATA接口和大4D供电，走线的时候可以说是非常折磨了；
  - 这点不完全算缺陷吧：机箱就是几块板子，全部需要自己手工安装，且螺丝都不是同一种，因此安装的时候非常折磨，但是搬运等也会方便很多，且可以全部拆了安装硬件，也算一种奇妙的取舍。

# NAS系统
系统方面由于考虑到主板自带的10G光卡，还是考虑组RAID的方案，因此选择了TrueNAS Scale。
装完应用就开始后悔了，但是想着配应用那么久就还是继续用吧。系统的容器部分直接采用K3S管理，而且官方给的charts写的那叫一个混沌邪恶，HELM这样用能把开发者气死。如果没有Linux和Kubernetes基础，还是谨慎选择TrueNAS Scale吧，运维的压力还是有点大的。


# 使用体验

HD630的核显能同时硬解4部4k片源，内存虽然买了32G，但是实际上日常使用应用只要用5G左右，剩下的都是ZFS L1Cache，二级缓存有钱再加，不开虚拟机非常够用。

# 阵列重建
由于是薅来的拆机盘，坏的也比预想的快很多，不过这时候RAID的好处也体现了，虽然挂了一块但是完全不影响使用，只是读写速度有所降低，如果是unraid则会完全无法读该盘数据，只能通过校验盘重建阵列。